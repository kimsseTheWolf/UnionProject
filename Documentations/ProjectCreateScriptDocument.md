# 通用项目创建脚本文档

为了将来能够按照统一的标准创建项目，我们在此定义并且开发通用项目创建脚本（Project Creation Script）。通过此脚本可以允许程序以特定的方式创建新的项目。

此脚本是基于json开发的，所有的语法标准都会按照json语言。接下来的文档中将会讲述文件的大概结构并且程序会如何读取这些文件。

## 文件总览
此部分将会大概展示一个pcs文件的基本解构

```json
{
  "version": "v1",
  "project_name": "项目名称",
  "project_description": "项目简介",
  "tags": [
    "标签的UUID",
    "标签的UUID"
  ],
  "store_location": "项目的存储位置",
  "properties": ["项目的属性"],
  "create_script": [
    "此部分将会保存项目创建时应用程序该如何操作"
  ]
}
```
除了 `properties` 与 `create_script` 以外，其他的都会作为一个项目的必填属性。因为这些在创建一个项目的时候是必要的。然而 `properties` 与 `create_script` 都是用户可以随便编写且定制的部分。你也可以直接编写此部分的内容来自定义用户想如何初始化项目。此部分的内容是独立的，因此你可以让此部分单独存在并且向程序生命在需要的时候导入需要的部分

## `Properties` 属性
Properties属性包括项目一些特殊的属性，比如是否是只读项目，这个项目是否加密，等等。随着将来的开发，更多的属性将会添加到备选项目中。

现在已经包括的属性

```json
{
  "properties": [
    {
      "name": "read_only"
    },
    {
      "name": "encrypted",
      "encrypted": "加密密码"
    }
  ]
}
```
如你所见，所有的属性都将会作为一个json对象存在properties列表中。每一个属性名称都必须存在`name`的字段中。若一个项目会有更多的信息，则其他的信息都将会存在以属性名称为键的字段中。

### properties外置声名
脚本中所有可以导入的部分都会用到相同的语法，那就是`import`关键字。在可导入的部分直接这样写：
```json
{
  "properties": [
    {"import": "导入外部文件的位置"}
  ],
  "create_script": [
    {"import": "导入外部文件的位置"}
  ]
}
```
在相应的位置填写导入声名，软件将会自动识别所在的位置并且应用到对应的位置。请注意，如果你已经填写了导入声名，就不要在此部分填写其他东西，因为会被覆盖掉。

## `create_script`属性
此部分将会声名在创建项目时如何操作此项目，其中包含了一些操作关键词可供用户操作。
```json
{
  "create_script": [
    {
      "method": "copy",
      "from": "文件位置"
    },
    {
      "method": "create",
      "type": "file或者是dir",
      "name": "带有文件后缀的文件名，或者是目录的名称"
    },
    {
      "method": "delete",
      "type": "file或者是dir",
      "name": "删除目标的名称，如果是文件需要携带文件后缀"
    }
  ]
}
```
如上所示，这三种方法是最基础的方法。我们接下来来讲一下这些指令的基础结构和效果以及一些其他你可能需要的基础知识。

### 指令块的基础结构
一个大括号包括的部分称之为一个指令块。指令块中包含了一个指令需要的所有信息。（我知道这样写很奇怪，但是为了方便计算机和人类都可以快速读懂指令到底在讲什么，所以我们仍然使用json作为基础语法）。
任何一个指令块的第一个条目必然是`method`属性。`method`属性会让程序知道这个代码块想要执行什么指令，根据`method`属性来决定程序收集哪些信息来完成执行操作。

接下来的所有部分都将会视情况而定，不同的指令有不同的信息需要提供。我们会在接下来的章节中讲述。

### `create_script` 指令总览

#### 1. Copy
```json
{
  "method": "copy",
  "from": "<file_location>"
}
```

此指令会让程序复制指定位置的文件到项目的根目录下。你可以直接输入一个文件的绝对路径。若你想从公共项目资源复制文件，你可以使用`{$project_public:'命名空间'}/`前缀加上文件名来复制文件。前缀导入一般用于插件或者项目创建预设快速创建文件。

对于前缀的使用与公共资源和公共资源命名空间的使用，请参寻文档的其他部分。

---

#### 2. Create
```json
{
  "method": "create",
  "type": "<creation type>",
  "name": "<file name>"
}
```

此指令会让程序在项目目录为根目录的相对位置创建一个文件或者文件夹。创建文件的指令访问项目文件夹以外的位置是被绝对禁止的。

Type属性有两个可以使用的值，dir或者是file。dir会创建一个目录，而file会创建一个文件。name部分需要填写目录或者文件的名称。请注意文件名称需要带文件类型。

**⚠安全警告！**

您可以通过create指令来创建脚本文件，但是为了防止开发者通过此操作向脚本注入恶意代码，默认情况下所有的脚本在执行之前都会先通知用户并让用户确认。在安全模式下，所有的脚本执行和调用系统代码行是不被允许的。